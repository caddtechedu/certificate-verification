var QRCode = function(el, opt) {
  this._htOption = {
    width: 256,
    height: 256,
    typeNumber: 4,
    correctLevel: QRCode.CorrectLevel.H,
    background: "#ffffff",
    foreground: "#000000"
  };

  if (typeof opt === 'string') {
    opt = { text: opt };
  }

  if (opt) {
    for (var i in opt) {
       this._htOption[i] = opt[i];
    }
  }

  if (typeof el === "string") {
    el = document.getElementById(el);
  }

  this._el = el;
  this._oQRCode = null;
  this._elImage = null;
  this._elCanvas = null;

  this.makeCode(opt.text || "");
};

QRCode.prototype.makeCode = function(text) {
  this._oQRCode = new QRCodeModel(this._htOption.typeNumber, this._htOption.correctLevel);
  this._oQRCode.addData(text);
  this._oQRCode.make();

  this._el.innerHTML = "";
  this._elImage = this._createImgTag();
  this._el.appendChild(this._elImage);
};

// Utility class
QRCode.CorrectLevel = {
  L: 1,
  M: 0,
  Q: 3,
  H: 2
};
